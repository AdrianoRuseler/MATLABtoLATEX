%
\documentclass{standalone}
\usepackage{tikz}
\usepackage{pgfplots} % loads also tikz
\usepackage{grffile}
\pgfplotsset{compat=newest} % This will configure the compatibility layer
\usetikzlibrary{plotmarks}
\usetikzlibrary{pgfplots.groupplots}
\usepackage{amsmath}
\usepackage{color} % Using this package, you can set the font color, text background, or page background
\usetikzlibrary{arrows,shapes,positioning}
\usepackage{anyfontsize}
\usepackage{siunitx}

\tikzset{ % Set line width
	ultra thin/.style= {line width=0.1pt},
	very thin/.style=  {line width=0.2pt},
	thin/.style=       {line width=0.4pt},% thin is the default
	semithick/.style=  {line width=0.6pt},
	thick/.style=      {line width=0.8pt},
	very thick/.style= {line width=1.2pt},
	ultra thick/.style={line width=1.6pt}
}

\pgfplotsset{every axis legend/.style={
		cells={anchor=center},% Centered entries
		inner xsep=3pt,inner ysep=2pt,nodes={inner sep=2pt,text depth=0.15em},
		anchor=north east,
		shape=rectangle,
		fill=white,
		rounded corners,
		draw=black,
		at={(0.993,0.98)}
	},	
	every node near coord/.append style={/pgf/number format/fixed,/pgf/number format/precision=2,  /pgf/number format/fixed zerofill,/pgf/number format/use comma,/pgf/number format/1000 sep={},rotate=90, anchor=west,
		check for zero/.code={
			\pgfkeys{/pgf/fpu=true}
			\pgfmathparse{\pgfplotspointmeta-4}
			\pgfmathfloatifflags{\pgfmathresult}{-}{
				\pgfkeys{/tikz/coordinate}
			}{}
			\pgfkeys{/pgf/fpu=false}
		}, check for zero, xshift=3, font=\scriptsize}	
}

\def \axiswidth {\linewidth} % Defines axis width value
\def \axisheight {0.8\linewidth} % Defines axis height value

% Defines color spec 
% http://www.color-hex.com for color details
\definecolor{c0color}{HTML}{00FF00} 
\definecolor{c1color}{HTML}{00FFFF}
\definecolor{c2color}{HTML}{0080FF}
\definecolor{c3color}{HTML}{0000FF}
\definecolor{c4color}{HTML}{8000FF}
\definecolor{c5color}{HTML}{FF00FF}
\definecolor{c6color}{HTML}{FF0080}
\definecolor{c7color}{HTML}{FF0000}
\definecolor{c8color}{HTML}{800000}
\definecolor{c9color}{HTML}{000000}

% 10 Shades of gray
\definecolor{c0gray}{HTML}{000000} 
\definecolor{c1gray}{HTML}{202120}
\definecolor{c2gray}{HTML}{363735}
\definecolor{c3gray}{HTML}{4b4d4a}
\definecolor{c4gray}{HTML}{4c4c4c}
\definecolor{c5gray}{HTML}{595959}
\definecolor{c6gray}{HTML}{666666}
\definecolor{c7gray}{HTML}{666666}
\definecolor{c8gray}{HTML}{474747}
\definecolor{c9gray}{HTML}{a3a3a3}


\begin{document}
  \begin{tikzpicture}
  

% Settings for siunitx package
\sisetup{scientific-notation = fixed, fixed-exponent = 0, round-mode = places,round-precision = 2,output-decimal-marker = {,}}

\begin{groupplot}[group style={group size= 1 by 1, vertical sep=0.2cm,  horizontal sep=1cm},ylabel absolute,ybar,x tick label style={ /pgf/number format/1000 sep=}] 
\nextgroupplot[height=\axisheight,width=\axiswidth,grid=major, enlarge y limits={upper,value=0.2},xticklabel style= {rotate=90,anchor=near xticklabel},
xtick = {60,180,...,1000},xmin=-60,ymin=0,ymax=25,ytick = {0,5,...,60},
title={Fundamental (\SI{60}{\hertz}) = \SI{310.2402}{};  THD: \SI{7.6619}{};},
xlabel=Frequ\^encia (Hz),ylabel=Magnitude,
] % End of axis configurations
\addplot[nodes near coords,fill,c0color]table[x=freq,y=mag,col sep=comma]{PSIMdataex01Va.csv}; % Add plot data
\addlegendentry{Va};
    \end{groupplot}
  \end{tikzpicture}
\end{document} % End of file
